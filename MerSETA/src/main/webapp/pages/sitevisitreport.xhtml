<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core" template="/WEB-INF/template.xhtml">

	<ui:define name="content">
		<p:importEnum type="haj.com.entity.enums.IdPassportEnum" var="idPassportEnum"></p:importEnum>
		<p:importEnum type="haj.com.entity.enums.UserPermissionEnum" />
		<div class="ui-g">
			<div class="ui-g-12">
				<div class="card card-w-title">
					<h1>Site Visit Report</h1>
					<h:form id="extensionrequestInsForm">
						<p:growl showDetail="false" sticky="false">
							<p:autoUpdate />
						</p:growl>
						<h:inputHidden value="#{sessionUI.latitude}" id="latitude" />
						<h:inputHidden value="#{sessionUI.longitude}" id="longitude" />
						<br />
						<h:panelGroup styleClass="md-inputfield">
							<p:dataTable rendered="true" var="rowVar" value="#{sitevisitreportUI.dataModel}" selection="#{sitevisitreportUI.company}" selectionMode="single" lazy="true" id="companyList" rowKey="#{rowVar.id}" paginator="true" rows="5" paginatorPosition="bottom" emptyMessage="#{lang['no.records.found']}"
								paginatorTemplate="#{lang['page']} {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15,20,25" reflow="true">
								<p:ajax event="rowSelect" listener="#{sitevisitreportUI.companySelected}" update="extensionrequestInsForm" />
								<p:column headerText="#{lang['company.name']}" filterBy="#{rowVar.companyName}" sortBy="#{rowVar.companyName}" filterStyle="width: 95%">
									<h:outputText value="#{rowVar.companyName}" />
								</p:column>
								<p:column headerText="#{lang['tradingName']}" filterBy="#{rowVar.tradingName}" sortBy="#{rowVar.tradingName}" filterStyle="width: 95%">
									<h:outputText value="#{rowVar.tradingName}" />
								</p:column>
								<p:column headerText="#{lang['entity.id']}" filterBy="#{rowVar.levyNumber}" sortBy="#{rowVar.levyNumber}" filterStyle="width: 95%" width="10%">
									<h:outputText value="#{rowVar.levyNumber}" />
								</p:column>
								<p:column headerText="Grant Status" width="13%" rendered="true">
									<h:outputText value="#{rowVar.lastestGrantStatus}" />
								</p:column>
								<p:column headerText="DG Verification Status" width="13%" rendered="true">
									<h:outputText value="#{rowVar.lastestDgVerificationStatus}" />
								</p:column>
								<p:column headerText="#{lang['status']}" sortBy="#{rowVar.companyStatus}" width="10%" rendered="false">
									<h:outputText value="#{lang[rowVar.companyStatus.registrationName]}" />
								</p:column>
							</p:dataTable>
						</h:panelGroup>
						<br />

						<h:panelGroup styleClass="md-inputfield" rendered="#{sitevisitreportUI.company ne null}" id="siteVisitReportListTableId">
							<h2>#{sitevisitreportUI.company.companyName}: #{lang['site.visit.report.reports']}</h2>
							<h:panelGroup styleClass="md-inputfield" rendered="#{sitevisitreportUI.company ne null}">
								<p:commandButton value="#{lang['create.site.visit.report']}" icon="ui-icon-save" update="@form" process="@this" action="#{sitevisitreportUI.createSiteVisitReport}" partialSubmit="true" />
							</h:panelGroup>
							<br />
							<p:dataTable rendered="true" var="rvSite" value="#{sitevisitreportUI.siteVisitReportList}" lazy="true" id="siteVisitReportByCompanyList" rowKey="#{rvSite.id}" paginator="true" rows="5" paginatorPosition="bottom" emptyMessage="#{lang['no.records.found']}"
								paginatorTemplate="#{lang['page']} {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15,20,25" reflow="true">

								<p:column headerText="ID" width="10%">
									<h:outputText value="#{rvSite.id}" />
								</p:column>

								<p:column headerText="#{lang['site.visit.report.create.date']}">
									<h:outputText value="#{rvSite.createDate}">
										<f:convertDateTime pattern="dd MMMM yyyy HH:mm" />
									</h:outputText>
								</p:column>

								<p:column headerText="#{lang['site.visit.report.status']}">
									<h:outputText value="#{rvSite.siteVisitReportStatusEnum.friendlyName}" />
								</p:column>

								<p:column style="width :7%" exportable="false">
									<p:commandButton update="@form" id="viewSiteVisitBtn" icon="fa fa-search-plus" immediate="true" action="#{sitevisitreportUI.viewSiteVisitReport}">
										<f:setPropertyActionListener value="#{rvSite}" target="#{sitevisitreportUI.sitevisitreport}" />
										<p:tooltip value="View Site Visit Report" for="viewSiteVisitBtn" />
									</p:commandButton>
								</p:column>

							</p:dataTable>
						</h:panelGroup>
						<br />



						<p:outputPanel rendered="#{sitevisitreportUI.siteVisitReportCreateClicked eq true and sitevisitreportUI.sitevisitreport.id eq null}">
							<h3>New Site Visit Report Entry</h3>
						</p:outputPanel>
						<p:outputPanel rendered="#{sitevisitreportUI.sitevisitreportSelected eq true and sitevisitreportUI.sitevisitreport.id ne null}">
							<h3>Site Visit Report Entry ID: #{sitevisitreportUI.sitevisitreport.id} Selected</h3>
						</p:outputPanel>
						<p:tabView id="tabView" rendered="#{sitevisitreportUI.sitevisitreportSelected eq true || sitevisitreportUI.siteVisitReportCreateClicked eq true}">
							<p:tab id="org" title="Organisation info">

								<p:panelGrid columns="3" style="width:100%" id="companyInsGrid" layout="grid" styleClass="ui-panelgrid-blank" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
									<h:panelGroup>
										<p:outputLabel value="#{lang['companyName']}" for="companyName" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="companyName" value="#{sitevisitreportUI.sitevisitreport.company.companyName}" style="width:95%" required="true" requiredMessage="#{lang['enter.the.company.name']}" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['tradingName']}" for="tradingName" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="tradingName" value="#{sitevisitreportUI.sitevisitreport.company.tradingName}" style="width:95%" required="true" requiredMessage="#{lang['enter.the.trading.name']}" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['telNumber']}" for="telNumberComp" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="telNumberComp" value="#{sitevisitreportUI.sitevisitreport.company.telNumber}" style="width:95%" required="true" requiredMessage="#{lang['enter.the.tel.number']}" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['faxNumber']}" for="faxNumberComp" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="faxNumberComp" value="#{sitevisitreportUI.sitevisitreport.company.faxNumber}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.faxNumber ne null and sitevisitreportUI.sitevisitreport.company.faxNumber.length() gt 0}" />
										<p:outputLabel id="faxNumberComp2" value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.faxNumber eq null or sitevisitreportUI.sitevisitreport.company.faxNumber.length() eq 0}" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['companyRegistrationNumber']}" for="companyRegistrationNumber" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="companyRegistrationNumber" value="#{sitevisitreportUI.sitevisitreport.company.companyRegistrationNumber}" style="width:95%" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['email']}" for="emailComp" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="emailComp" value="#{sitevisitreportUI.sitevisitreport.company.email}" style="width:95%" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['levyNumber']}" for="levyNumber" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="levyNumber" value="#{sitevisitreportUI.sitevisitreport.company.levyNumber}" style="width:95%" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['numberOfEmployees']}" for="numberOfEmployees" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="numberOfEmployees" value="#{sitevisitreportUI.sitevisitreport.company.numberOfEmployees}" style="width:95%" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['sicCode']}" for="sicCode" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel id="sicCode" value="#{sitevisitreportUI.sitevisitreport.company.sicCode.description}" style="width:95%" required="true" requiredMessage="#{lang['enter.sic.code']}" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="#{lang['organisation.type']}" for="organisationType" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel value="#{lang['n.a']}" rendered="#{sitevisitreportUI.sitevisitreport.company.organisationType eq null}" />
										<p:outputLabel id="organisationType" value="#{sitevisitreportUI.sitevisitreport.company.organisationType.description}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.organisationType ne null}" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="Recognition Agreement" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel value="N/A" rendered="#{sitevisitreportUI.sitevisitreport.company.recognitionAgreement eq null}" />
										<p:outputLabel value="#{sitevisitreportUI.sitevisitreport.company.recognitionAgreement.yesNoName}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.recognitionAgreement ne null}" />
									</h:panelGroup>
									<h:panelGroup>
										<p:outputLabel value="Union Name" styleClass="Fs12 FontLight" />
										<br />
										<p:outputLabel value="N/A" rendered="#{sitevisitreportUI.sitevisitreport.company.majorityUnion eq null}" />
										<p:outputLabel value="#{sitevisitreportUI.sitevisitreport.company.majorityUnion.description}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.majorityUnion ne null}" />
									</h:panelGroup>
								</p:panelGrid>
								<p:panelGrid columns="2" style="width:100%" id="companyInsGrida" layout="grid" styleClass="ui-panelgrid-blank" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
									<p:fieldset legend="#{lang['residentialAddress']}">
										<p:panelGrid columns="2" style="width : 95%" styleClass="ui-panelgrid-blank" id="addrResAddress">
											<h:panelGroup>
												<p:outputLabel value="#{lang['address.line.1']}" for="addr1" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="addr1" value="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine1}" style="width:95%" required="true" requiredMessage="#{lang['enter.residential.address']}" />
												<br />
												<p:outputLabel value="#{lang['address.line.2']}" for="addr2" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine2 eq null or sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine2.length() eq 0}" />
												<p:outputLabel id="addr2" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine2}"
													rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine2 ne null and sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine2.length() gt 0}" />
											</h:panelGroup>
											<h:panelGroup>
												<p:outputLabel value="#{lang['address.line.3']}" for="addr3" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="addr3" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine3}"
													rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine3 ne null and sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine3.length() gt 0}" />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine3 eq null or sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine3.length() eq 0}" />
												<br />
												<p:outputLabel value="#{lang['address.line.4']}" for="addr4" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="addr4" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine4}"
													rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine4 ne null and sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine4.length() gt 0}" />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine4 eq null or sitevisitreportUI.sitevisitreport.company.residentialAddress.addressLine4.length() eq 0}" />
											</h:panelGroup>
											<h:panelGroup>
												<p:outputLabel value="#{lang['post.code']}" for="pcode" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="pcode" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.postcode}"
													rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.postcode ne null and sitevisitreportUI.sitevisitreport.company.residentialAddress.postcode.length() gt 0}" />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.postcode eq null or sitevisitreportUI.sitevisitreport.company.residentialAddress.postcode.length() eq 0}" />
												<br />
												<h:outputLabel value="#{lang['municipality']}" for="MunicipalityID" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="MunicipalityID" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.residentialAddress.municipality.municipalityDesc}" />
											</h:panelGroup>
											<h:panelGroup>
												<div class="EmptyBox40"></div>
											</h:panelGroup>
										</p:panelGrid>
									</p:fieldset>

									<p:fieldset legend="#{lang['postalAddress']}">
										<p:panelGrid columns="2" style="width : 95%" styleClass="ui-panelgrid-blank" id="postalAddress">
											<h:panelGroup>
												<p:outputLabel value="#{lang['address.line.1']}" for="postalAddressaddr1" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="postalAddressaddr1" value="#{sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine1}" style="width:95%" required="true" requiredMessage="#{lang['enter.postal.address']}" />
												<br />
												<p:outputLabel value="#{lang['address.line.2']}" for="postalAddressaddr2" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="postalAddressaddr2" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine2}" />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine2 eq null or sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine2.length() eq 0}" />
											</h:panelGroup>
											<h:panelGroup>
												<p:outputLabel value="#{lang['address.line.3']}" for="postalAddressaddr3" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="postalAddressaddr3" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine3}" />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine3 eq null or sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine3.length() eq 0}" />
												<br />
												<p:outputLabel value="#{lang['address.line.4']}" for="postalAddressaddr4" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="postalAddressaddr4" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine4}" />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine4 eq null or sitevisitreportUI.sitevisitreport.company.postalAddress.addressLine4.length() eq 0}" />
											</h:panelGroup>
											<h:panelGroup>
												<p:outputLabel value="#{lang['post.code']}" for="postalAddressPcode" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="postalAddressPcode" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.postalAddress.postcode}" required="true" requiredMessage="#{lang['provide.postcode']}" />
												<p:outputLabel value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.company.postalAddress.postcode eq null or sitevisitreportUI.sitevisitreport.company.postalAddress.postcode.length() eq 0}" />
												<br />
												<h:outputLabel value="#{lang['municipality']}" for="postalAddressMunicipalityID" styleClass="Fs12 FontLight" />
												<br />
												<p:outputLabel id="postalAddressMunicipalityID" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.company.postalAddress.municipality.municipalityDesc}" />
											</h:panelGroup>
											<h:panelGroup>
												<div>
													<p:outputLabel value="#{lang['same.as.my.address']}" styleClass="Fs12 FontLight" />
												</div>
												<div>
													<p:selectBooleanCheckbox value="#{sitevisitreportUI.sitevisitreport.company.postalAddress.sameAddress}" disabled="true">
													</p:selectBooleanCheckbox>
												</div>
											</h:panelGroup>
										</p:panelGrid>
									</p:fieldset>
								</p:panelGrid>
							</p:tab>

							<p:tab id="sitevr" title="Site Visit Report">
								<h:panelGroup id="sitevrTabId">
									<p:panelGrid columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{sitevisitreportUI.sitevisitreport.company ne null and sitevisitreportUI.companyHasSites eq true}">
										<p:fieldset legend="#{lang['site.visit.report.sites.linked.to.employer.header']}" rendered="#{sitevisitreportUI.companyHasSites eq true}">
											<h:panelGroup id="registeredAddressId1">
												<h:panelGrid columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group">
													<p:selectOneMenu style="width:95%" value="#{sitevisitreportUI.site}" converter="SitesConvertor" id="sitesId" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.sitesList}" var="site" itemLabel="#{site.companyName}" itemValue="#{site}" />
														<p:ajax update="extensionrequestInsForm:tabView:sitevrTabId" process="@this" listener="#{sitevisitreportUI.checkAddressOnSite()}" />
													</p:selectOneMenu>
												</h:panelGrid>
												<p:panelGrid id="registeredAddressId2" columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{sitevisitreportUI.sitevisitreport.site ne null}">
													<p:panelGrid columns="2" style="width : 95%" styleClass="ui-panelgrid-blank" id="registeredAddress1" rendered="#{sitevisitreportUI.sitevisitreport.site.registeredAddress ne null and sitevisitreportUI.sitevisitreport.site.registeredAddress.id ne null}">
														<h:panelGroup>
															<p:outputLabel value="#{lang['address.line.1']}" for="addrs1" styleClass="Fs12 FontLight" />
															<br />
															<p:outputLabel id="addrs1" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine1}" style="width:95%" />
															<p:outputLabel id="addrs12" value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine1 eq null or sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine1.length() eq 0}" />
															<br />
															<p:outputLabel value="#{lang['address.line.2']}" for="addrs2" styleClass="Fs12 FontLight" />
															<br />
															<p:outputLabel id="addrs2" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine2}" />
															<p:outputLabel id="addrs22" value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine2 eq null or sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine2.length() eq 0}" />
														</h:panelGroup>
														<h:panelGroup>
															<p:outputLabel value="#{lang['address.line.3']}" for="addsr3" styleClass="Fs12 FontLight" />
															<br />
															<p:outputLabel id="addsr3" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine3}" />
															<p:outputLabel id="addsr33" value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine3 eq null or sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine3.length() eq 0}" />
															<br />
															<p:outputLabel value="#{lang['address.line.4']}" for="addsr4" styleClass="Fs12 FontLight" />
															<br />
															<p:outputLabel id="addsr4" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine4}" />
															<p:outputLabel id="addsr44" value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine4 eq null or sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine4.length() eq 0}" />
														</h:panelGroup>
														<h:panelGroup>
															<p:outputLabel value="#{lang['post.code']}" for="spcode" styleClass="Fs12 FontLight" />
															<br />
															<p:outputLabel id="spcode" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.postcode}" />
															<p:outputLabel id="spcode1" value="#{lang['n.a']}" style="width:95%" rendered="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.postcode eq null or sitevisitreportUI.sitevisitreport.site.registeredAddress.postcode.length() eq 0}" />
														</h:panelGroup>
														<h:panelGroup>
															<br />
														</h:panelGroup>
													</p:panelGrid>
													<p:panelGrid columns="2" style="width : 95%" styleClass="ui-panelgrid-blank" id="registeredAddress2" rendered="#{sitevisitreportUI.sitevisitreport.site.registeredAddress eq null or sitevisitreportUI.sitevisitreport.site.registeredAddress.id eq null}">
														<h:panelGroup>
															<p:outputLabel value="#{lang['address.line.1']}" for="addsir2" styleClass="Fs12 FontLight" />
															<br />
															<p:inputText id="addsir1" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine1}" readonly="#{sitevisitreportUI.disableAll}">
																<p:ajax />
															</p:inputText>
															<br />
															<p:outputLabel value="#{lang['address.line.2']}" for="addsir2" styleClass="Fs12 FontLight" />
															<br />
															<p:inputText id="addsir2" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine2}" readonly="#{sitevisitreportUI.disableAll}">
																<p:ajax />
															</p:inputText>
														</h:panelGroup>
														<h:panelGroup>
															<p:outputLabel value="#{lang['address.line.3']}" for="addsir3" styleClass="Fs12 FontLight" />
															<br />
															<p:inputText id="addsir3" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine3}" readonly="#{sitevisitreportUI.disableAll}">
																<p:ajax />
															</p:inputText>
															<br />
															<p:outputLabel value="#{lang['address.line.4']}" for="addsir4" styleClass="Fs12 FontLight" />
															<br />
															<p:inputText id="addsir4" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.addressLine4}" readonly="#{sitevisitreportUI.disableAll}">
																<p:ajax />
															</p:inputText>
														</h:panelGroup>
														<h:panelGroup>
															<br />
															<br />
															<p:outputLabel value="#{lang['post.code']}" for="pcodesi" styleClass="Fs12 FontLight" />
															<br />
															<p:inputText id="pcodesi" style="width:95%" value="#{sitevisitreportUI.sitevisitreport.site.registeredAddress.postcode}" readonly="#{sitevisitreportUI.disableAll}">
																<p:ajax />
															</p:inputText>
														</h:panelGroup>
														<h:panelGroup>
															<br />
														</h:panelGroup>
													</p:panelGrid>
												</p:panelGrid>
											</h:panelGroup>
										</p:fieldset>
									</p:panelGrid>

									<p:panelGrid columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group">
										<p:fieldset legend="#{lang['site.visit.report.site.visit.date']}" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
											<h:panelGroup rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
												<div>
													<p:outputLabel for="newSubmissionDate" value="Site Visit Report Date" />
												</div>
												<div>
													<p:calendar id="newSubmissionDate" value="#{sitevisitreportUI.sitevisitreport.visitDate}" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true" showOn="button" maxdate="#{sitevisitreportUI.maxDate}" required="true" requiredMessage="#{['select.site.visit.report.date']}"
														disabled="#{sitevisitreportUI.disableAll}">
														<p:ajax event="dateSelect" />
													</p:calendar>
												</div>
											</h:panelGroup>
										</p:fieldset>
									</p:panelGrid>

									<!-- TRADES -->
									<p:panelGrid columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
										<p:fieldset legend="#{lang['site.visit.report.list.the.trade']}">
											<p:panelGrid columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" id="tradesGrid">
												<p:dataTable var="rowVar" value="#{sitevisitreportUI.workPlaceApprovalList}" id="workplaceapprovaldataListId" rowKey="#{rowVar.id}" paginator="true" rows="20" paginatorPosition="bottom"
													paginatorTemplate="Page {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="20,25,30,35,40" reflow="true" lazy="true">
													<p:column headerText="#{lang['site.visit.report.trade.qualification.code']}">
														<h:outputText value="#{rowVar.qualification.code}" rendered="#{rowVar.qualification ne null and rowVar.qualification.code ne ''}" />
														<h:outputText value="Code not found" rendered="#{rowVar.qualification eq null or rowVar.qualification.code eq ''}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.trade.title.description']}">
														<h:outputText value="#{rowVar.ofoCodes.description}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.trade.ofo.code']}" sortBy="#{rowVar.ofoCode}">
														<h:outputText value="#{rowVar.ofoCodes.ofoCode}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.trade.nqflevel.code']}" sortBy="#{rowVar.ofoCode}">
														<h:outputText value="#{rowVar.qualification.nqflevelg2description}" rendered="#{rowVar.qualification ne null and rowVar.qualification.nqflevelg2description ne ''}" />
														<h:outputText value="Level not found" rendered="#{rowVar.qualification eq null or rowVar.qualification.nqflevelg2description eq ''}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.trade.workplace.approval.date']}">
														<h:outputText value="#{rowVar.approvalDate}" />
													</p:column>
												</p:dataTable>
											</p:panelGrid>
										</p:fieldset>
									</p:panelGrid>
									<!-- TRADES -->

									<!-- LIST OF QUALIFIED ARTISANS/TRAINERS/SUBJECT MATTER EXPERTS (SME) PER SITE -->

									<p:panelGrid id="smeListing" columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
										<p:fieldset legend="#{lang['site.visit.report.list.the.sme']}">
											<p:outputPanel id="userSearchPanel" rendered="#{not sitevisitreportUI.disableAll and !sitevisitreportUI.smeUser.doneSearch}">
												<p:fieldset id="searchRsaIdOrPassport" legend="#{lang['enter.RSA.ID.number.or.passport.number']}">
													<p:panelGrid id="searchRsaIdOrPassportPnl" columns="3" styleClass="ui-panelgrid-blank form-group">
														<p:selectOneRadio id="passNumID" value="#{sitevisitreportUI.idpassport}" columns="1" layout="responsive">
															<p:ajax update="smeListing" />
															<f:selectItems value="#{enumUI.idPassportEnumDD}" var="idpassEnum" itemLabel="#{idpassEnum}" itemValue="#{idpassEnum}" />
														</p:selectOneRadio>
														<h:panelGroup id="rsaIDInput" styleClass="md-inputfield" rendered="#{sitevisitreportUI.idpassport eq idPassportEnum.RsaId}">
															<p:inputText id="rsaIdCriteria" maxlength="#{sitevisitreportUI.MAX_RSA_ID_NUMBER}" value="#{sitevisitreportUI.idnumber}" style="width:95%" requiredMessage="#{lang['rsa.id.number']} " required="false">
															</p:inputText>
															<p:outputLabel value="#{lang['rsa.id.number']}" for="rsaIdCriteria" />
														</h:panelGroup>
														<h:panelGroup id="passportNumInput" styleClass="md-inputfield" rendered="#{sitevisitreportUI.idpassport eq idPassportEnum.Passport}">
															<p:inputText validatorMessage="#{lang['user.passport.length']}" id="passportNumCriteria" maxlength="#{sitevisitreportUI.MAX_PASSPORT_NUMBER}" value="#{sitevisitreportUI.passportNumber}" style="width:95%" requiredMessage="#{lang['passport.number']}" required="false">
															</p:inputText>
															<h:message for="passportNumCriteria" />
															<p:outputLabel value="#{lang['passport.number']}" for="passportNumCriteria" />
														</h:panelGroup>
														<p:commandButton id="idPassBtn" icon="fa fa-search" value="Submit" process="searchRsaIdOrPassport" actionListener="#{sitevisitreportUI.searchForUser}" update="smeListing" rendered="#{sitevisitreportUI.idpassport ne null}" />
													</p:panelGrid>
												</p:fieldset>
											</p:outputPanel>
											<p:panelGrid columns="2" style="width:100%" id="smeId" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{not sitevisitreportUI.disableAll and sitevisitreportUI.smeUser.doneSearch}">
												<h:panelGroup styleClass="md-inputfield" columns="2">
													<p:inputText id="companyNameId" value="#{sitevisitreportUI.sme.siteName}" style="width:95%">
														<p:ajax></p:ajax>
													</p:inputText>
													<p:outputLabel value="#{lang['thecompanyName']}:" />
												</h:panelGroup>
												<h:panelGroup styleClass="md-inputfield" columns="2" rendered="true">
													<p:inputText disabled="#{sitevisitreportUI.smeUser.id ne null}" id="firstName" value="#{sitevisitreportUI.sme.firstName}" style="width:95%">
														<p:ajax></p:ajax>
													</p:inputText>
													<p:outputLabel value="First Name: " />
												</h:panelGroup>
												<h:panelGroup styleClass="md-inputfield" columns="2" rendered="true">
													<p:inputText disabled="#{sitevisitreportUI.smeUser.id ne null}" id="lastName" value="#{sitevisitreportUI.sme.lastName}" style="width:95%">
														<p:ajax></p:ajax>
													</p:inputText>
													<p:outputLabel value="Last Name: " />
												</h:panelGroup>
												<h:panelGroup styleClass="md-inputfield" columns="2">
													<p:inputText disabled="true" id="identityNumberId" value="#{sitevisitreportUI.sme.identityNumber}" style="width:95%">
														<p:ajax></p:ajax>
													</p:inputText>
													<p:outputLabel value="#{lang['identityNumber']}:" />
												</h:panelGroup>
												<h:panelGroup styleClass="md-inputfield" columns="2">
													<p:inputText disabled="true" id="passportId" value="#{sitevisitreportUI.sme.passport}" style="width:95%">
														<p:ajax></p:ajax>
													</p:inputText>
													<p:outputLabel value="#{lang['passport.number']}:" />
												</h:panelGroup>
												<h:panelGroup styleClass="md-inputfield" columns="2">
													<p:spacer height="10px" />
												</h:panelGroup>
												<h:panelGroup styleClass="md-inputfield" columns="2">
													<p:autoComplete id="qualificationId" value="#{sitevisitreportUI.sme.qualification}" completeMethod="#{autoCompleteUI.completeQualification}" var="rv" itemLabel="#{rv.codeString} #{rv.description}" itemValue="#{rv}" forceSelection="true" converter="QualificationConvertor" dropdown="true"
														minQueryLength="3" maxResults="10" inputStyle="width: 95%" style="width: 95%">
														<p:column headerText="Code" style="white-space: nowrap">#{rv.codeString}</p:column>
														<p:column headerText="Description" style="white-space: nowrap">#{rv.description}</p:column>
														<p:ajax event="itemSelect" />
													</p:autoComplete>
													<p:outputLabel value="#{lang['site.visit.report.qualification']}:" />
												</h:panelGroup>
												<h:panelGroup styleClass="md-inputfield" columns="2">
													<p:autoComplete id="tradeId" value="#{sitevisitreportUI.sme.trade}" completeMethod="#{autoCompleteUI.completeOfoCodes}" var="rv" itemLabel="#{rv.ofoCodeParent} #{rv.ofoDescription}" itemValue="#{rv}" forceSelection="true" converter="OfoCodesConvertor" dropdown="true" minQueryLength="3"
														maxResults="10" inputStyle="width: 95%" style="width: 95%">
														<p:column headerText="Code" style="white-space: nowrap">#{rv.ofoCodeParent}</p:column>
														<p:column headerText="Description" style="white-space: nowrap">#{rv.ofoDescription}</p:column>
														<p:ajax event="itemSelect" />
													</p:autoComplete>
													<p:outputLabel value="#{lang['site.visit.report.trade']}:" />
												</h:panelGroup>
											</p:panelGrid>
											<p:panelGrid columns="2" styleClass="ui-panelgrid-blank" rendered="#{not sitevisitreportUI.disableAll and sitevisitreportUI.smeUser.doneSearch}">
												<p:commandButton  value="#{lang['submit']}" icon="ui-icon-save" update="extensionrequestInsForm:tabView:smeGrid smeListing" process="@this" action="#{sitevisitreportUI.smeInsert}" partialSubmit="true" rendered="#{not sitevisitreportUI.disableAll}"
													immediate="true" />
												<p:commandButton value="#{lang['clear']}" icon="ui-icon-clear-all" update="smeListing" process="@this" action="#{sitevisitreportUI.prepareNewSME}" rendered="#{not sitevisitreportUI.disableAll}">
													<p:resetInput target="smeId" />
												</p:commandButton>
											</p:panelGrid>

											<h:panelGrid columns="1" style="width:100%" id="smeGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
												<p:dataTable var="rowVar" value="#{sitevisitreportUI.sitevisitreport.siteVisitReportSMEs}" id="smeDataList" rowKey="#{rowVar.id}" paginator="true" rows="20" paginatorPosition="bottom"
													paginatorTemplate="Page {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="20,25,30,35,40" reflow="true" lazy="true">

													<p:column headerText="#{lang['site.visit.report.sme.site.name']}">
														<h:outputText value="#{rowVar.siteName}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.sme.full.names']}">
														<h:outputText value="#{rowVar.fullNames}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.sme.identity.number']}">
														<h:outputText value="#{rowVar.identityNumber}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.sme.passport.number']}">
														<h:outputText value="#{rowVar.passport}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.sme.trade']}">
														<h:outputText value="#{rowVar.trade.ofoCodeParent} #{rowVar.trade.ofoDescription}" />
													</p:column>
													<p:column headerText="#{lang['site.visit.report.sme.qualification']}">
														<h:outputText value="#{rowVar.qualification.codeString} #{rowVar.qualification.description}" />
													</p:column>
													<p:column width="65">
														<p:commandButton icon="fa fa-trash-o" title="#{lang['delete']}" update="extensionrequestInsForm:tabView:smeGrid extensionrequestInsForm:tabView:smeListing" process="@this" action="#{sitevisitreportUI.smeDelete}" partialSubmit="true" rendered="#{not sitevisitreportUI.disableAll}">
															<p:confirm header="#{lang['confirmation']}" message="#{lang['are.you.sure']}" icon="ui-icon-warning" />
															<f:setPropertyActionListener value="#{rowVar}" target="#{sitevisitreportUI.sme}" />
														</p:commandButton>
													</p:column>
												</p:dataTable>
											</h:panelGrid>
										</p:fieldset>
									</p:panelGrid>
									<!-- LIST OF QUALIFIED ARTISANS/TRAINERS/SUBJECT MATTER EXPERTS (SME) PER SITE -->

									<p:panelGrid id="workplaceSuitabilityGrid" columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
										<!-- WORKPLACE SUITABILITY -->



										<p:fieldset legend="#{lang['site.visit.report.purpose.of.site.visit.workplace.suitability.header']}: #{lang['site.visit.report.workplace.suitability.type.equipment']}">
											<div class="ui-g">

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.description']}</h3>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.yes.no']} Selection</h3>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.revisit.date']}</h3>
												</div>

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.1']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoEquipmentOne}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:answerOnePanel" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="answerOnePanel">
														<p:calendar required="true" placeholder="Click the button below to select a date" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true" value="#{sitevisitreportUI.sitevisitreport.equipmentOneRevisitDate}" rendered="#{sitevisitreportUI.displayCalendarEquipmentOne}" mode="popup"  showOn="button"
															inputStyle="width:95%;  opacity: 1 !important; color:black !important" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarEquipmentOne}" />
													</p:outputPanel>
												</div>

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.2']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu id="equipmentTwoYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoEquipmentTwo}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:equipmentTwoRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="equipmentTwoRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.equipmentTwoRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarEquipmentTwo}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarEquipmentTwo}" />
													</p:outputPanel>
												</div>

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.3']}" styleClass="gray " />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu id="equipmentThreeYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoEquipmentThree}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:equipmentThreeRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="equipmentThreeRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.equipmentThreeRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarEquipmentThree}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarEquipmentThree}" />
													</p:outputPanel>
												</div>

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.4']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu id="equipmentFourYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoEquipmentFour}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:equipmentFourRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="equipmentFourRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.equipmentFourRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarEquipmentFour}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarEquipmentFour}" />
													</p:outputPanel>
												</div>


												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.5']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu id="equipmentFiveYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoEquipmentFive}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:equipmentFiveRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="equipmentFiveRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.equipmentFiveRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarEquipmentFive}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarEquipmentFive}" />
													</p:outputPanel>
												</div>
											</div>
										</p:fieldset>



										<p:fieldset legend="#{lang['site.visit.report.purpose.of.site.visit.workplace.suitability.header']}: #{lang['site.visit.report.workplace.suitability.type.record']}">
											<div class="ui-g">

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.description']}</h3>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.yes.no']} Selection</h3>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.revisit.date']}</h3>
												</div>

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.6']}" styleClass="gray " />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu rendered="true" id="recordOneYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoRecordOne}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:recordOneRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="recordOneRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.recordOneRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarRecordOne}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarRecordOne}" />
													</p:outputPanel>
												</div>


												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.7']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu rendered="true" id="recordTwoYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoRecordTwo}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:recordTwoRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="recordTwoRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.recordTwoRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarRecordTwo}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarRecordTwo}" />
													</p:outputPanel>
												</div>
											</div>
										</p:fieldset>

										<p:fieldset legend="#{lang['site.visit.report.purpose.of.site.visit.workplace.suitability.header']}: #{lang['site.visit.report.workplace.suitability.type.safety']}">
											<div class="ui-g">

												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.description']}</h3>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.yes.no']} Selection</h3>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<h3>#{lang['site.visit.report.workplace.suitability.revisit.date']}</h3>
												</div>


												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.8']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu rendered="true" id="safetyOneYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoSafetyOne}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:safetyOneRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="safetyOneRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.safetyOneRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarSafetyOne}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarSafetyOne}" />
													</p:outputPanel>
												</div>


												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.9']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu rendered="true" id="safetyTwoYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoSafetyTwo}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:safetyTwoRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="safetyTwoRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.safetyTwoRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarSafetyTwo}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarSafetyTwo}" />
													</p:outputPanel>
												</div>



												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputLabel value="#{lang['site.visit.report.workplace.suitability.description.10']}" styleClass="gray" />
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:selectOneMenu rendered="true" id="safetyThreeYesNo" style="width: 95%" required="true" value="#{sitevisitreportUI.sitevisitreport.yesNoSafetyThree}" converter="YesNoLookupConvertor" disabled="#{sitevisitreportUI.disableAll}">
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" />
														<f:selectItems value="#{sitevisitreportUI.yesNoList}" var="var" itemLabel="#{var.yesNoName}" itemValue="#{var}" />
														<p:ajax process="@this" update="extensionrequestInsForm:tabView:safetyThreeRevisitDateId" partialSubmit="true" listener="#{sitevisitreportUI.yesNoSelected()}" />
													</p:selectOneMenu>
												</div>
												<div class="ui-g-12 ui-md-4 ui-lg-4">
													<p:outputPanel id="safetyThreeRevisitDateId">
														<p:calendar required="true" placeholder="Click the button below to select a date" value="#{sitevisitreportUI.sitevisitreport.safetyThreeRevisitDate}" showOn="button" inputStyle="width:95%;  opacity: 1 !important; color:black !important" pattern="#{autoCompleteUI.CALENDER_PATTERN}" mask="true"
															rendered="#{sitevisitreportUI.displayCalendarSafetyThree}" disabled="#{sitevisitreportUI.disableAll}">
															<p:ajax event="dateSelect" />
														</p:calendar>
														<p:outputLabel value="N/A" styleClass="gray" rendered="#{!sitevisitreportUI.displayCalendarSafetyThree}" />
													</p:outputPanel>
												</div>
											</div>
										</p:fieldset>
										<!-- WORKPLACE SUITABILITY -->
									</p:panelGrid>

									<p:panelGrid columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
										<!-- COMMENTS OR SUMMARY AND ACTION TO TAKE PLACE AFTER SITE VISIT -->
										<p:fieldset legend="#{lang['site.visit.report.comment.heading']}">
											<p:inputTextarea value="#{sitevisitreportUI.sitevisitreport.comments}" autoResize="true" style="width: 95%" required="false" requiredMessage="#{lang['site.visit.report.required.comments']}" readonly="#{sitevisitreportUI.disableAll}">
												<p:ajax />
											</p:inputTextarea>
										</p:fieldset>
										<!-- COMMENTS OR SUMMARY AND ACTION TO TAKE PLACE AFTER SITE VISIT -->
									</p:panelGrid>
								</h:panelGroup>
							</p:tab>
							<p:tab id="doc" title="Documents" rendered="false">
								<p:panelGrid columns="2" styleClass="ui-panelgrid-blank" id="docTable" rendered="#{sitevisitreportUI.sitevisitreport ne null}">
									<p:dataTable value="#{sitevisitreportUI.sitevisitreport.docs}" var="rv1" emptyMessage="#{lang['no.records.found']}" rowKey="#{rv1.id}">
										<p:column headerText="#{lang['type']}" width="18%">#{rv1.configDoc.name}</p:column>
										<p:column headerText="#{lang['original.file.name']}" priority="4">
											<p:outputLabel value="#{rv1.originalFname}" styleClass="Fs12"></p:outputLabel>
										</p:column>
										<p:column headerText="#{lang['uploaded.by']}">#{rv1.users.firstName} #{rv1.users.lastName}</p:column>
										<p:column headerText="#{lang['uploaded']}" width="15%" priority="3">
											<h:outputText value="#{rv1.createDate}">
												<f:convertDateTime pattern="dd MMM yyyy (HH:mm)" />
											</h:outputText>
										</p:column>
										<p:column headerText="#{lang['version']}" width="10%" priority="4">
											<h:outputText value="#{rv1.versionNo}">
											</h:outputText>
										</p:column>
										<p:column headerText="#{lang['original.required']}">
											<center>
												<h:panelGroup rendered="#{rv1.configDoc.originalRequired}" styleClass="green">
													<i class="fa fa-files-o fa-3x" aria-hidden="true"></i>
												</h:panelGroup>
												<h:panelGroup rendered="#{not rv1.configDoc.originalRequired}" styleClass="red">
													<i class="fa fa-times fa-3x" aria-hidden="true"></i>
												</h:panelGroup>
											</center>
										</p:column>
										<p:column width="40">
											<p:commandButton icon="fa fa-upload" id="upload" styleClass="flat" process="@this" oncomplete="PF('dlgUpload').show()" update=":uploadForm" rendered="#{not sitevisitreportUI.disableAll}">
												<f:setPropertyActionListener value="#{rv1}" target="#{sitevisitreportUI.doc}" />
											</p:commandButton>
											<p:tooltip for="upload" value="#{rv1.originalFname eq null ? lang['click.to.upload'] : lang['re.upload']}" position="left" />
										</p:column>
									</p:dataTable>
								</p:panelGrid>
							</p:tab>
							<p:tab id="signoff" title="Sign Off">
								<p:panelGrid columns="1" style="width:100%" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{sitevisitreportUI.sitevisitreport.company ne null}">
									<div class="EmptyBox20"></div>
									<p:panelGrid columns="1" style="width:100%">
										<h2>#{lang['declerations']}</h2>
										<h3>#{lang['by.checking.below']}</h3>
										<p>#{lang['site.visit.report.declaration.text']}</p>
									</p:panelGrid>
									<p:outputPanel id="unitList">
										<p:panelGrid columns="2" style="width:100%" id="signOffGrid" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{!sitevisitreportUI.disableAll}">
											<h:panelGroup>
												<div>
													<p:outputLabel value="" for="companyUsers" />
												</div>
												<div>
													<p:selectOneMenu id="companyUsers" value="#{sitevisitreportUI.signoff.user}" converter="UsersConvertor" style="width:75%">
														<p:ajax></p:ajax>
														<f:selectItem itemLabel="--- #{lang['select.one']} ---" styleClass="FontLight gray" noSelectionOption="true" />
														<f:selectItems value="#{selectItemsUI.findDistinctCompanyUsersPosistionPopulated(sitevisitreportUI.sitevisitreport.company)}" var="il" itemLabel="#{il.firstName} #{il.lastName} (#{il.roles})" />
													</p:selectOneMenu>
												</div>
											</h:panelGroup>
											<p:commandButton value="Add Sign Off" update="unitList" icon="ui-icon-plus" styleClass="flat" action="#{sitevisitreportUI.addToList}" process="signOffGrid" />
										</p:panelGrid>
										<p:dataTable var="rv" value="#{sitevisitreportUI.sitevisitreport.signOffs}" id="employeesimportList" rowKey="#{rowVar.id}" reflow="true">
											<p:column headerText="#{lang['signed.off.by']}">
												<p:outputLabel value="#{rv.user.firstName} #{rv.user.lastName}" />
											</p:column>
											<p:column headerText="Date Added">
												<p:outputLabel value="#{sessionUI.now}" rendered="#{rv.createDate eq null}">
													<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" />
												</p:outputLabel>
												<p:outputLabel value="#{rv.createDate}" rendered="#{rv.createDate ne null}">
													<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" />
												</p:outputLabel>
											</p:column>
											<p:column headerText="Date Signed Off">
												<p:outputLabel value="#{rv.signOffDate}" rendered="#{rv.signOffDate ne null}">
													<f:convertDateTime pattern="dd/MM/yyyy - HH:mm" />
												</p:outputLabel>
												<p:outputLabel value="Awaiting Sign Off" rendered="#{rv.signOffDate eq null}"/>
											</p:column>
											<p:column headerText="#{lang['acknowledge']}">
												<div>
													<p:selectBooleanCheckbox value="#{rv.accept}" disabled="true">
													</p:selectBooleanCheckbox>
												</div>
												<div>
													<p:outputLabel value="#{lang['site.visit.report.declaration.text']}"></p:outputLabel>
												</div>
											</p:column>
											<p:column style="width: 7%" rendered="#{sitevisitreportUI.sitevisitreport.id eq null}">
												<p:commandButton action="#{sitevisitreportUI.removeFromSignOffList}" rendered="#{rv.id eq null}" immediate="true" icon="fa fa-trash" update="@form">
													<f:setPropertyActionListener value="#{rv}" target="#{sitevisitreportUI.signoffSelected}" />
												</p:commandButton>
											</p:column>
										</p:dataTable>
									</p:outputPanel>
								</p:panelGrid>
								<!-- CLO VIEW REJECT REASONS AND SUBMIT ONCE REJECTED -->
								<p:panelGrid columns="2" styleClass="ui-panelgrid-blank" style="width:100%" layout="grid" rendered="#{sitevisitreportUI.sitevisitreport.company ne null and sitevisitreportUI.rejectReasonsChild.size() gt 0 and not sitevisitreportUI.disableAll}">
									<p:commandButton value="View Rejections" icon="fa fa-times" styleClass="flat Fs18" oncomplete="PF('rejectChildReason').show()" style="height: 50px;">
									</p:commandButton>
									<p:commandButton value="#{lang['submit']}" icon="ui-icon-save" styleClass="flat green-btn Fs18" style="height: 50px;" rendered="#{not sitevisitreportUI.disableAll}">
										<p:ajax listener="#{sitevisitreportUI.sitevisitreportInsertOnceRejected}" update="@form" />
									</p:commandButton>
								</p:panelGrid>
								<!-- CLO INITIAL SUBMIT -->
								<p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width:100%" layout="grid" rendered="#{not sitevisitreportUI.disableAll}">
									<p:commandButton update="extensionrequestInsForm" value="#{lang['submit']}" icon="ui-icon-save" action="#{sitevisitreportUI.sitevisitreportInsert}" styleClass="flat green-btn Fs18" style="height: 50px;">
									</p:commandButton>
								</p:panelGrid>
							</p:tab>
						</p:tabView>
					</h:form>
				</div>
			</div>
		</div>

		<script type="text/javascript">

			$(document).ready(function() {
		
				//alert('ready');
				geoFindMe();
			});
		
		
			function geoFindMe() {
		
				//alert('1');
		
			  if (!navigator.geolocation){
			    output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
			    return;
			  }
		
			  var options = {
					  enableHighAccuracy: true,
					  timeout: 10000,
					  maximumAge: 0
					};
		
			  function success(position) {
		
				 //alert('success');
		
			    var latitude  = position.coords.latitude;
			    var longitude = position.coords.longitude;
		
			    //alert('<p>Latitude is ' + latitude + '° <br/>Longitude is ' + longitude + '°</p>');
		
			    document.getElementById("extensionrequestInsForm:latitude").value = latitude;
				document.getElementById("extensionrequestInsForm:longitude").value = longitude;
		
			  }
		
			  function error() {
				  //alert('unable');
			    output.innerHTML = "Unable to retrieve your location";
			  }
		
			//alert('start geo');
		
			  navigator.geolocation.getCurrentPosition(success, error, options);
		
			  //navigator.geolocation.getCurrentPosition(success, error);
			}
		
			function handleUnameRequest(xhr, status, args) {
		        if(args.validationFailed) {
		            jQuery('#dialogPWD').effect("shake", { times:3 }, 500);
		        } else {
		        	PF('dlgPwd').hide();
		
		        }
		    }
	
		</script>

		<!-- DIALOGS BELOW -->

		<p:dialog header="#{lang['upload.documents']}" widgetVar="dlgUpload" resizable="false" hideEffect="clip" showEffect="clip" id="commonUPLOAD" width="80%" responsive="true" modal="true" dynamic="true">
			<h:form id="uploadForm">
				<h:panelGroup id="uploadGroup">
					<div class="ui-g">
						<div class="ui-g-12">
							<div class="card">
								<h1 style="font-weight: bold; font-size: 25px;">#{sdfUI.doc.configDoc.name}</h1>
								<p:panel>
									<h:panelGrid columns="2" style="width: 100%">
										<p:outputLabel value="#{lang['notes']}:" for="note" />
										<p:inputTextarea id="note" value="#{sitevisitreportUI.doc.note}" autoResize="false" rows="2" style="width: 90%">
											<p:ajax />
										</p:inputTextarea>
									</h:panelGrid>

									<div class="TexAlCenter">
										<span class="Fleft Fs12 softgray">#{lang['drag.and.drop.your.file.on.the.upload.image.below']}</span> <br />
									</div>
									<p:fileUpload onstart="uploadStart()" oncomplete="uploadDone()" fileUploadListener="#{sitevisitreportUI.storeNewFile}" mode="advanced" dragDropSupport="true" showButtons="false" label="#{lang['select.file']}" fileLimitMessage="#{lang['file.to.big.to.upload']}"
										update=":extensionrequestInsForm:tabView:docTable" multiple="false" fileLimit="1" allowTypes="/(\.|\/)(gif|jpe?g|png|pdf|docx|txt)$/" immediate="false" auto="true" />
								</p:panel>
								<div class="EmptyBox10" />
							</div>
						</div>
					</div>
				</h:panelGroup>
			</h:form>
		</p:dialog>

		<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" width="250" dynamic="true">
			<p:commandButton value="#{lang['yes']}" styleClass="ui-confirmdialog-yes GreenButton" icon="ui-icon-check" />
			<p:commandButton value="#{lang['no']}" type="button" styleClass="ui-confirmdialog-no RedButton" icon="ui-icon-close" />
		</p:confirmDialog>

		<ui:include src="/pages/upload/commonuploadDialogs.xhtml" />
	</ui:define>

</ui:composition>
