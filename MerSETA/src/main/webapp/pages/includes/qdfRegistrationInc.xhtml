<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core">
	<div class="ui-g">
		<div class="ui-g-12">
			<p:fieldset legend="#{lang['company.info']}" rendered="#{qdfCompanyRegistrationUI.selectedCompany ne null}">
				<p:panelGrid columns="2" style="width:100%" id="companyInfoGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
					<h:panelGroup styleClass="md-inputfield">
						<p:inputText disabled="true" id="companyName" value="#{qdfCompanyRegistrationUI.selectedCompany.companyName}" style="width:95%;  opacity: 1 !important; color:black !important" requiredMessage="#{lang['enter.the.company.name']}" />
						<p:outputLabel value="#{lang['companyName']}" for="companyName" />
					</h:panelGroup>

					<h:panelGroup styleClass="md-inputfield">
						<p:inputText disabled="true" id="companyTradingName" value="#{qdfCompanyRegistrationUI.selectedCompany.tradingName}" style="width:95%;  opacity: 1 !important; color:black !important" requiredMessage="#{lang['enter.the.trading.name']}" />
						<p:outputLabel value="#{lang['tradingName']}" for="companyTradingName" />
					</h:panelGroup>

					<h:panelGroup styleClass="md-inputfield">
						<p:inputText disabled="true" id="companyTelNumber" value="#{qdfCompanyRegistrationUI.selectedCompany.telNumber}" style="width:95%;  opacity: 1 !important; color:black !important" requiredMessage="#{lang['enter.the.tel.number']}" />
						<p:outputLabel value="#{lang['telNumber']}" for="companyTelNumber" />
					</h:panelGroup>

					<h:panelGroup styleClass="md-inputfield">
						<p:inputText disabled="true" id="companyFaxNumber" value="#{qdfCompanyRegistrationUI.selectedCompany.faxNumber}" style="width:95%;  opacity: 1 !important; color:black !important" />
						<p:outputLabel value="#{lang['faxNumber']}" for="companyFaxNumber" />
					</h:panelGroup>

					<h:panelGroup styleClass="md-inputfield">
						<p:inputText disabled="true" id="companyRegistrationNumber" value="#{qdfCompanyRegistrationUI.selectedCompany.companyRegistrationNumber}" style="width:95%;  opacity: 1 !important; color:black !important" requiredMessage="#{lang['enter.company.registration.number']}" />
						<p:outputLabel value="#{lang['companyRegistrationNumber']}" for="companyRegistrationNumber" />
					</h:panelGroup>

					<h:panelGroup styleClass="md-inputfield">
						<p:inputText disabled="true" id="companyEmail" value="#{qdfCompanyRegistrationUI.selectedCompany.email}" style="width:95%;  opacity: 1 !important; color:black !important" requiredMessage="#{lang['enter.email.address']}" />
						<p:outputLabel value="#{lang['email']}" for="companyEmail" />
					</h:panelGroup>
				</p:panelGrid>
				<br />
				<br />

				
			</p:fieldset>
			
			<p:fieldset legend="Applicant Infomation" rendered="#{qdfCompanyRegistrationUI.selectedCompany eq null}">
				<ui:include src="/pages/includes/user_info_display.xhtml">
						<ui:param name="user" value="#{qdfCompanyRegistrationUI.qdfCompany.qualificationsCurriculumDevelopment.createUser}" />
				</ui:include>
			</p:fieldset>
			<br />
			<br />
			<c:if test="#{!qdfCompanyRegistrationUI.formUser.doneSearch}">
				<ui:include src="/pages/includes/searchUserPassportOrID.xhtml" />
			</c:if>
			<h:panelGroup rendered="#{qdfCompanyRegistrationUI.formUser.doneSearch}">
				<p:fieldset legend="#{!qdfCompanyRegistrationUI.formUser.doneSearch ? 'Enter RSA ID number or Passport number' : lang['details'] }">
					<p:panelGrid columns="2" style="width:100%" id="sdfInsGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
						<h:panelGroup styleClass="md-inputfield">
							<p:inputText id="userName" value="#{qdfCompanyRegistrationUI.formUser.firstName}" maxlength="#{qdfCompanyRegistrationUI.MAX_FIRST_NAME_SIZE}" style="width:95%" required="true" disabled="#{qdfCompanyRegistrationUI.formUser.existingUser or qdfCompanyRegistrationUI.formUser.regFieldsDone or qdfCompanyRegistrationUI.formUser.firstName ne null}" requiredMessage="#{lang['enter.your.name']}" />
							<p:outputLabel value="#{lang['first.name']}:" for="userName" />
						</h:panelGroup>

						<h:panelGroup styleClass="md-inputfield">
							<p:inputText id="userSurname" value="#{qdfCompanyRegistrationUI.formUser.lastName}" maxlength="#{qdfCompanyRegistrationUI.MAX_LAST_NAME_SIZE}" style="width:95%" required="true" disabled="#{qdfCompanyRegistrationUI.formUser.existingUser or qdfCompanyRegistrationUI.formUser.regFieldsDone or qdfCompanyRegistrationUI.formUser.lastName ne null}" requiredMessage="#{lang['enter.your.last.name']}" />
							<p:outputLabel value="#{lang['surname']}:" for="userSurname" />
						</h:panelGroup>

						<h:panelGroup styleClass="md-inputfield">
							<p:inputText id="userEmail" value="#{qdfCompanyRegistrationUI.formUser.email}" maxlength="#{qdfCompanyRegistrationUI.MAX_EMAIL_SIZE}" style="width:95%" required="true" disabled="#{qdfCompanyRegistrationUI.formUser.existingUser or qdfCompanyRegistrationUI.formUser.regFieldsDone or qdfCompanyRegistrationUI.formUser.email ne null}" requiredMessage="#{lang['enter.your.email.address']}" />
							<p:outputLabel value="#{lang['emails']}:" for="userEmail" />
						</h:panelGroup>

						<h:panelGroup styleClass="md-inputfield">
							<p:inputMask id="telNumber" value="#{qdfCompanyRegistrationUI.formUser.telNumber}" mask="#{qdfCompanyRegistrationUI.TELPHONE_FORMAT}" style="width:95%" required="true" requiredMessage="#{lang['enter.tell.number']}" disabled="#{qdfCompanyRegistrationUI.formUser.existingUser or qdfCompanyRegistrationUI.formUser.regFieldsDone or qdfCompanyRegistrationUI.formUser.telNumber ne null}" />
							<p:outputLabel value="#{lang['tel.number']}:" for="telNumber" />
						</h:panelGroup>

						<h:panelGroup styleClass="md-inputfield">
							<p:inputMask id="cellPhone" value="#{qdfCompanyRegistrationUI.formUser.cellNumber}" mask="#{qdfCompanyRegistrationUI.CELLPHONE_FORMAT}" style="width:95%" required="true" requiredMessage="#{lang['enter.cell.number']}" disabled="#{qdfCompanyRegistrationUI.formUser.existingUser or qdfCompanyRegistrationUI.formUser.regFieldsDone or qdfCompanyRegistrationUI.formUser.cellNumber ne null}" />
							<p:outputLabel value="#{lang['cell.number']}:" for="cellPhone" />
						</h:panelGroup>
						
						<h:panelGroup styleClass="md-inputfield">
							<p:inputMask id="faxNumber" value="#{qdfCompanyRegistrationUI.formUser.faxNumber}" mask="#{qdfCompanyRegistrationUI.FAX_NUMBER_FORMAT}" style="width:95%" required="true" requiredMessage="#{lang['enter.cell.number']}"  disabled="#{qdfCompanyRegistrationUI.formUser.existingUser or qdfCompanyRegistrationUI.formUser.regFieldsDone or qdfCompanyRegistrationUI.formUser.cellNumber ne null}"/>
							<p:outputLabel value="#{lang['fax.number']} : " for="faxNumber" />
						</h:panelGroup>

						<h:panelGroup styleClass="md-inputfield" rendered="#{qdfCompanyRegistrationUI.formUser.rsaIDNumber.length() gt 0}">
							<p:inputText id="userIdNumber" value="#{qdfCompanyRegistrationUI.formUser.rsaIDNumber}" style="width:95%" disabled="true" />
							<p:outputLabel value="#{lang['rsa.id.number']}:" for="userIdNumber" />
						</h:panelGroup>

						<h:panelGroup styleClass="md-inputfield" rendered="#{qdfCompanyRegistrationUI.formUser.passportNumber.length() gt 0}">
							<p:inputText id="userPassport" value="#{qdfCompanyRegistrationUI.formUser.passportNumber}" style="width:95%" disabled="true" />
							<p:outputLabel value="#{lang['passport.number']}:" for="userPassport" />
						</h:panelGroup>
					</p:panelGrid>
					<br />
					<br />
					<p:panelGrid columns="2" styleClass="ui-panelgrid-blank" id="userDocTable" rendered="#{qdfCompanyRegistrationUI.qdfCompany.docs.size() gt 0}">
						<p:dataTable value="#{qdfCompanyRegistrationUI.qdfCompany.docs}" var="userrv" emptyMessage="#{lang['no.records.found']}" rowKey="#{userrv.id}">
							<p:column headerText="#{lang['type']}" width="18%">#{userrv.configDoc.name}</p:column>
							<p:column headerText="#{lang['original.file.name']}" priority="4">
								<p:outputLabel value="#{userrv.originalFname}" styleClass="Fs12" rendered="#{userrv.originalFname ne null}" />
								<p:outputLabel value="Document Not Uploaded" rendered="#{userrv.originalFname eq null or userrv.originalFname eq ''}" />
							</p:column>
							<p:column headerText="#{lang['uploaded.by']}">
								<p:outputLabel value="#{userrv.users.firstName} #{userrv.users.lastName}" rendered="#{userrv.users ne null}" />
								<p:outputLabel value="N/A" rendered="#{userrv.users eq null and userrv.originalFname eq null}" />
								<p:outputLabel value="Awaiting Submission" rendered="#{userrv.users eq null and userrv.originalFname ne null}" />
							</p:column>
							<p:column headerText="#{lang['uploaded']}" width="15%" priority="3">
								<h:outputText value="#{userrv.createDate}" rendered="#{userrv.createDate ne null}">
									<f:convertDateTime pattern="dd MMM yyyy (HH:mm)" />
								</h:outputText>
								<p:outputLabel value="N/A" rendered="#{userrv.createDate eq null and userrv.originalFname eq null}" />
								<p:outputLabel value="Awaiting Submission" rendered="#{userrv.createDate eq null and userrv.originalFname ne null}" />
							</p:column>
							<p:column headerText="#{lang['version']}" width="11%" priority="4">
								<h:outputText value="#{userrv.versionNo}" rendered="#{userrv.versionNo ne null}" />
								<p:outputLabel value="N/A" rendered="#{userrv.versionNo eq null and userrv.originalFname eq null}" />
								<p:outputLabel value="Awaiting Submission" rendered="#{userrv.versionNo eq null and userrv.originalFname ne null}" />
							</p:column>
							<p:column headerText="#{lang['original.required']}">
								<center>
									<h:panelGroup rendered="#{userrv.configDoc.originalRequired}" styleClass="green">
										<i class="fa fa-files-o fa-3x" aria-hidden="true"></i>
									</h:panelGroup>
									<h:panelGroup rendered="#{not userrv.configDoc.originalRequired}" styleClass="red">
										<i class="fa fa-times fa-3x" aria-hidden="true"></i>
									</h:panelGroup>
								</center>
							</p:column>
							<p:column width="180" headerText="#{lang['view.edit']}">
								<p:commandButton ajax="false" icon="fa fa-download " action="#{uploadDocUI.download}" id="dlbUserDocs" rendered="#{userrv.id ne null}">
									<f:setPropertyActionListener value="#{userrv}" target="#{uploadDocUI.doc}" />
								</p:commandButton>
								<p:tooltip for="dlbUserDocs" value="#{lang['download.the.file']}" position="left" rendered="#{userrv.id ne null}" />

								<p:spacer width="5" rendered="#{userrv.id ne null}" />
								<p:commandButton icon="fa fa-bars " id="dhistUserDocs" action="#{uploadDocUI.showHistory}" oncomplete="PF('histDialog').show()" update=":documenttrackeForm:documenttrackeList" rendered="#{userrv.id ne null}">
									<f:setPropertyActionListener value="#{userrv}" target="#{uploadDocUI.doc}" />
								</p:commandButton>
								<p:tooltip for="dhistUserDocs" value="#{lang['document.tracker']}" position="left" rendered="#{userrv.id ne null}" />

								<!-- only with permission to upload can upload a new version -->
								<p:commandButton rendered="#{sessionUI.task.processRole.rolePermission eq UserPermissionEnum.Upload or sessionUI.task.processRole.rolePermission eq UserPermissionEnum.EditUpload or sessionUI.task.processRole.rolePermission eq UserPermissionEnum.FinalUploadApproval or sessionUI.task.processRole.rolePermission eq UserPermissionEnum.FinalUpload}" icon="fa fa-upload" id="uploadUserDocs"
									styleClass="#{userrv.originalFname eq null ? 'red-btn' : ''} flat" process="@this" oncomplete="PF('dlgUpload').show()" update=":uploadForm">
									<f:setPropertyActionListener value="#{userrv}" target="#{qdfCompanyRegistrationUI.doc}" />
								</p:commandButton>
								<p:tooltip for="uploadUserDocs" value="#{userrv.originalFname eq null ? lang['click.to.upload'] : lang['re.upload']}" position="left" />

								<h:panelGroup id="panelGroupThreeUserDocs" rendered="#{userrv.note ne null and userrv.note.length() gt 0}">
									<p:spacer width="5" />
									<p:commandButton icon="fa fa-comment-o " id="dnoteUserDocs" oncomplete="PF('noteDialog').show()" update=":noteForm:notePanel">
										<f:setPropertyActionListener value="#{userrv}" target="#{uploadDocUI.doc}" />
									</p:commandButton>
									<p:tooltip for="dnoteUserDocs" value="#{lang['view.note']}" position="left" />
								</h:panelGroup>

								<h:panelGroup id="panelGroupFourUserDocs" rendered="#{userrv.extension.toLowerCase() eq 'pdf' or userrv.extension.toLowerCase() eq 'png' or userrv.extension.toLowerCase() eq 'jpg' or userrv.extension.toLowerCase() eq 'jpeg' or userrv.extension.toLowerCase() eq 'gif'}">
									<p:spacer width="5" />
									<p:commandButton icon="fa fa-eye " id="viewerButtonUserDocs" oncomplete="PF('viewDialog').show()" update=":viewForm:viewer" action="#{uploadDocUI.buildStreamContent}">
										<f:setPropertyActionListener value="#{userrv}" target="#{uploadDocUI.doc}" />
									</p:commandButton>
									<p:tooltip for="viewerButtonUserDocs" value="#{lang['view.document']} " position="left" />
								</h:panelGroup>

							</p:column>
						</p:dataTable>
					</p:panelGrid>
				</p:fieldset>
			</h:panelGroup>
			<br />
			<br />
			
			
			<h:panelGroup rendered="false">
			<p:fieldset legend="#{lang['documents']}" rendered="#{qdfCompanyRegistrationUI.selectedCompany.docs.size() gt 0}" >
			<p:panelGrid columns="2" styleClass="ui-panelgrid-blank" id="companyDocTable" rendered="#{qdfCompanyRegistrationUI.selectedCompany.docs.size() gt 0}" >
					<p:dataTable value="#{qdfCompanyRegistrationUI.selectedCompany.docs}" var="comprv" emptyMessage="#{lang['no.records.found']}" rowKey="#{comprv.id}">
						<p:column headerText="#{lang['type']}" width="18%">#{comprv.configDoc.name}</p:column> 
						<p:column headerText="#{lang['original.file.name']}" priority="4">
							<p:outputLabel value="#{comprv.originalFname}" styleClass="Fs12" rendered="#{comprv.originalFname ne null}" />
							<p:outputLabel value="Document Not Uploaded" rendered="#{comprv.originalFname eq null or comprv.originalFname eq ''}" />
						</p:column>
						<p:column headerText="#{lang['uploaded.by']}">
							<p:outputLabel value="#{comprv.users.firstName} #{comprv.users.lastName}" rendered="#{comprv.users ne null}" />
							<p:outputLabel value="N/A" rendered="#{comprv.users eq null and comprv.originalFname eq null}" />
							<p:outputLabel value="Awaiting Submission" rendered="#{comprv.users eq null and comprv.originalFname ne null}" />
						</p:column>
						<p:column headerText="#{lang['uploaded']}" width="15%" priority="3">
							<h:outputText value="#{comprv.createDate}" rendered="#{comprv.createDate ne null}">
								<f:convertDateTime pattern="dd MMM yyyy (HH:mm)" />
							</h:outputText>
							<p:outputLabel value="N/A" rendered="#{comprv.createDate eq null and comprv.originalFname eq null}" />
							<p:outputLabel value="Awaiting Submission" rendered="#{comprv.createDate eq null and comprv.originalFname ne null}" />
						</p:column>
						<p:column headerText="#{lang['version']}" width="11%" priority="4">
							<h:outputText value="#{comprv.versionNo}" rendered="#{comprv.versionNo ne null}" />
							<p:outputLabel value="N/A" rendered="#{comprv.versionNo eq null and comprv.originalFname eq null}" />
							<p:outputLabel value="Awaiting Submission" rendered="#{comprv.versionNo eq null and comprv.originalFname ne null}" />
						</p:column>
						<p:column headerText="#{lang['original.required']}">
							<center>
								<h:panelGroup rendered="#{comprv.configDoc.originalRequired}" styleClass="green">
									<i class="fa fa-files-o fa-3x" aria-hidden="true"></i>
								</h:panelGroup>
								<h:panelGroup rendered="#{not comprv.configDoc.originalRequired}" styleClass="red">
									<i class="fa fa-times fa-3x" aria-hidden="true"></i>
								</h:panelGroup>
							</center>
						</p:column>

						<p:column width="180" headerText="#{lang['view.edit']}">
							<p:commandButton ajax="false" icon="fa fa-download " action="#{uploadDocUI.download}" id="dlbUserDocs" rendered="#{comprv.id ne null}">
								<f:setPropertyActionListener value="#{comprv}" target="#{uploadDocUI.doc}" />
							</p:commandButton>
							<p:tooltip for="dlbUserDocs" value="#{lang['download.the.file']}" position="left" rendered="#{comprv.id ne null}" />

							<p:spacer width="5" rendered="#{comprv.id ne null}" />
							<p:commandButton icon="fa fa-bars " id="dhistUserDocs" action="#{uploadDocUI.showHistory}" oncomplete="PF('histDialog').show()" update=":documenttrackeForm:documenttrackeList" rendered="#{comprv.id ne null}">
								<f:setPropertyActionListener value="#{comprv}" target="#{uploadDocUI.doc}" />
							</p:commandButton>
							<p:tooltip for="dhistUserDocs" value="#{lang['document.tracker']}" position="left" rendered="#{comprv.id ne null}" />

							<!-- only with permission to upload can upload a new version -->
							<p:commandButton rendered="#{sessionUI.task.processRole.rolePermission eq UserPermissionEnum.Upload or sessionUI.task.processRole.rolePermission eq UserPermissionEnum.EditUpload or sessionUI.task.processRole.rolePermission eq UserPermissionEnum.FinalUploadApproval or sessionUI.task.processRole.rolePermission eq UserPermissionEnum.FinalUpload}" icon="fa fa-upload" id="uploadUserDocs"
								styleClass="#{comprv.originalFname eq null ? 'red-btn' : ''} flat" process="@this" oncomplete="PF('dlgUpload').show()" update=":uploadForm">
								<f:setPropertyActionListener value="#{comprv}" target="#{qdfCompanyRegistrationUI.doc}" />
							</p:commandButton>
							<p:tooltip for="uploadUserDocs" value="#{comprv.originalFname eq null ? lang['click.to.upload'] : lang['re.upload']}" position="left" />

							<h:panelGroup id="panelGroupThreeUserDocs" rendered="#{comprv.note ne null and comprv.note.length() gt 0}">
								<p:spacer width="5" />
								<p:commandButton icon="fa fa-comment-o " id="dnoteUserDocs" oncomplete="PF('noteDialog').show()" update=":noteForm:notePanel">
									<f:setPropertyActionListener value="#{comprv}" target="#{uploadDocUI.doc}" />
								</p:commandButton>
								<p:tooltip for="dnoteUserDocs" value="#{lang['view.note']}" position="left" />
							</h:panelGroup>

							<h:panelGroup id="panelGroupFourUserDocs" rendered="#{comprv.extension.toLowerCase() eq 'pdf' or comprv.extension.toLowerCase() eq 'png' or comprv.extension.toLowerCase() eq 'jpg' or comprv.extension.toLowerCase() eq 'jpeg' or comprv.extension.toLowerCase() eq 'gif'}">
								<p:spacer width="5" />
								<p:commandButton icon="fa fa-eye " id="viewerButtonUserDocs" oncomplete="PF('viewDialog').show()" update=":viewForm:viewer" action="#{uploadDocUI.buildStreamContent}">
									<f:setPropertyActionListener value="#{comprv}" target="#{uploadDocUI.doc}" />
								</p:commandButton>
								<p:tooltip for="viewerButtonUserDocs" value="#{lang['view.document']} " position="left" />
							</h:panelGroup>

						</p:column>
					</p:dataTable>
				</p:panelGrid>
				</p:fieldset>
				</h:panelGroup>
		</div>
	</div>
</ui:composition>
