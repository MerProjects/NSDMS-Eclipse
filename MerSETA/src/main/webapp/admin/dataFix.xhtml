<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core" template="/WEB-INF/template.xhtml">
	<ui:define name="content">
		<div class="ui-g">
			<div class="ui-g-12">
				<div class="card card-w-title">

					<h1>DATAFIX</h1>

					<h:form id="mainform">

						<p:growl sticky="false">
							<p:autoUpdate />
						</p:growl>
						
						<p:panel header="Run: populateNewAssModStructure" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="populateNewAssModStructure" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Run: populateNewAssModStructure" update="populateNewAssModStructure" action="#{dataFixUI.populateNewAssModStructure}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Run: populateNewSdpStructure" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="populateNewSdpStructure" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Run: populateNewSdpStructure" update="populateNewSdpStructure" action="#{dataFixUI.populateNewSdpStructure}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Run Schedule: runAssessorModeratorDeAccreditationSchedule" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="scheAssessModer" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Run Schedule: runAssessorModeratorDeAccreditationSchedule" update="scheAssessModer" action="#{dataFixUI.runAssessorModeratorDeAccreditationSchedule}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Run Schedule: runProviderDeAccreditationSchedule" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="provideSchedular" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Run Schedule: runProviderDeAccreditationSchedule" update="provideSchedular" action="#{dataFixUI.runProviderDeAccreditationSchedule}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Gen Data: PIP Learner Link on Company learner Level" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="populatePipLinkPanelCLL" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Gen Data: PIP Learner Link on Company learner Level" update="populatePipLinkPanelCLL" action="#{dataFixUI.populateLearnerLinkToPipLearnerLink}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Gen Data: PIP Learner Link" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="populatePipLinkPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Gen Data: PIP Learner Link" update="populatePipLinkPanel" action="#{dataFixUI.populatePipLearnerLink}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: populateCompanyLearnersDateForQmr" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="populateCompanyLearnersDateForQmrPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: populateCompanyLearnersDateForQmr" update="populateCompanyLearnersDateForQmrPanel" action="#{dataFixUI.populateCompanyLearnersDateForQmr}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: populateCompanyLearnersLegacyDateForQmr" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="populateCompanyLearnersLegacyDateForQmrPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: populateCompanyLearnersLegacyDateForQmr" update="populateCompanyLearnersLegacyDateForQmrPanel" action="#{dataFixUI.populateCompanyLearnersLegacyDateForQmr}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: testQmrGeneration" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="testQmrMonthGenerationPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: testQmrGeneration" update="testQmrMonthGenerationPanel" action="#{dataFixUI.testQmrGeneration}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: testQmrQuarterGeneration" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="testQmrQuarterGenerationPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: testQmrQuarterGeneration" update="testQmrQuarterGenerationPanel" action="#{dataFixUI.testQmrQuarterGeneration}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: fixComapnyLearnersProviderApplicationData" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="fixComapnyLearnersProviderApplicationDataPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: fixComapnyLearnersProviderApplicationData" update="fixComapnyLearnersProviderApplicationDataPanel" action="#{dataFixUI.fixComapnyLearnersProviderApplicationData}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: runCompanySiteNumberAllocation" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="runCompanySiteNumberAllocationPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: runCompanySiteNumberAllocation" update="runCompanySiteNumberAllocationPanel" action="#{dataFixUI.runCompanySiteNumberAllocation}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: runUserBirthTownFix" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="runUserBirthTownFixPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: runUserBirthTownFix" update="runUserBirthTownFixPanel" action="#{dataFixUI.runUserBirthTownFix}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: runUserNameFix" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="runUserNameFixPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: runUserNameFix" update="runUserNameFixPanel" action="#{dataFixUI.runUserNameFix}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: fixUsersData" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="fixUsersDataPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: fixUsersData" update="fixUsersDataPanel" action="#{dataFixUI.fixUsersData}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: fixExtensionOfScopeSelfEvaluation" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="fixExtensionOfScopeSelfEvaluationPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: fixExtensionOfScopeSelfEvaluation" update="fixExtensionOfScopeSelfEvaluationPanel" action="#{dataFixUI.fixExtensionOfScopeSelfEvaluation}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Data: Duplicate Approved Active Contracts" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="dataFixDuplicateActiveContractsPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Data: Duplicate Approved Active Contracts" update="dataFixDuplicateActiveContractsPanel" action="#{dataFixUI.deleteDuplicateApprovedContracts}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Active Contract Info on Payment Level" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="dtaFixDuplicateActiveContractsPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Active Contract Info on Payment Level" update="dtaFixDuplicateActiveContractsPanel" action="#{dataFixUI.fixDataActiveContractDetail}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Populate RSA Citizen Status On Users Level" >
							<p:panelGrid columns="1" style="width:100%" id="populateUserCitizenTypePanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Populate RSA Citizen Status On Users Level" update="populateUserCitizenTypePanel" action="#{dataFixUI.populateUserCitizenType}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Active Contracts Information Extension data" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="fixContractInformationPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Active Contracts Information" update="fixContractInformationPanel" action="#{dataFixUI.fixDataActiveContracts}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Fix Active Contracts Detail" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="fixContractDetailPanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Fix Active ContractsDetail" update="fixContractDetailPanel" action="#{dataFixUI.fixToActiveContractDetail}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Generate Tranch One Payments" rendered="true">
							<p:panelGrid columns="1" style="width:100%" id="tranchOnePanel" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Generate Tranch One Payments" update="tranchOnePanel" action="#{dataFixUI.generateTranchOnePayments}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Generate Wsp Company History for all 2020 WSP" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="wspHistGenerateGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Generate Wsp Company History for all 2020 WSP" update="wspHistGenerateGrid" action="#{dataFixUI.populateWspCompanyHistroy}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Link Active Contracts to PIP" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="actContractGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Link Unlinked Active Contracts" update="actContractGrid" action="#{dataFixUI.linkActiveContractsDataToPIP}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Generate MG Verification By Fin Year" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="mgVerByYear" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup>
									<div>
										<p:outputLabel value="Fin Year" />
									</div>
									<div>
										<p:selectOneMenu value="#{dataFixUI.selectedYear}" style="width:95%" required="false" >
											<p:ajax />
											<f:selectItems value="#{dataFixUI.distinctFinYears}" />
										</p:selectOneMenu>
									</div>
								</h:panelGroup>
								<p:commandButton value="Generate MG Verification By Year" update="mgVerByYear" action="#{dataFixUI.generateMgVerificationByFinYear}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Generate Dg Verification By Small Companies With Rejected Grants" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="dgVerRejGird" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Generate Dg Verification" update="dgVerRejGird" action="#{dataFixUI.generateDgVerificationForSmallCompaniesRejectedWspFinYear}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Create First Step In Extension Request" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="extGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber decimalPlaces="0" value="#{dataFixUI.extensionRequestId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="Extension Request ID" />
								</h:panelGroup>
								<p:commandButton value="Create First Step In Extension Request By ID" update="extGrid" action="#{dataFixUI.createTaskForExtensionRequest}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Fix Sign off" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="wspSignOffGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber value="#{dataFixUI.wspSignOffId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="WSP Sign Off ID" />
								</h:panelGroup>
								<p:commandButton value="Update Accepted on WSP Sign Off ID" update="wspSignOffGrid" action="#{dataFixUI.setAcceptedForWspSignOff}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Delete Failed Imports By WSP ID and batch size" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="deleteMand" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber decimalPlaces="0" value="#{dataFixUI.wspId}" style="width:95%" placeholder="WSP ID">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="WSP ID" />
								</h:panelGroup>
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber decimalPlaces="0" value="#{dataFixUI.batchSize}" style="width:95%" placeholder="Batch SIZE ID">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="Batch SIZE" />
								</h:panelGroup>
								<p:commandButton value="Delete Failed Imports By WSP" update="@form" action="#{dataFixUI.deleteFailedImportedEntriesByWspID}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Archive Entries" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="archiveGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="Archive 2018 Entries" update="archiveGrid" action="#{dataFixUI.archiveRecords}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Generate DG Verification" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="genVerGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber value="#{dataFixUI.wspId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="WSP ID" />
								</h:panelGroup>
								<p:commandButton value="Generate DG Verification by WSP ID" update="genVerGrid" action="#{dataFixUI.generateDgVerificationByWspId}" />

								<p:commandButton value="Generate DG Verification by SQL" update="genVerGrid" action="#{dataFixUI.generateDgVerificationByWspIdScript}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Send Wsp to merseta workflow" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="wspTaskSendGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber value="#{dataFixUI.wspId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="WSP ID" />
								</h:panelGroup>
								<p:commandButton value="Update Accepted on WSP Sign Off ID" update="wspTaskSendGrid" action="#{dataFixUI.sendWspToMersetaWorkflow}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Wsp reset to appeal" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="wspResetGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber value="#{dataFixUI.wspId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="WSP ID" />
								</h:panelGroup>
								<p:commandButton value="Reset WSP to appeal process" update="wspResetGrid" action="#{dataFixUI.reopenWspForAppeal}" />
							</p:panelGrid>
						</p:panel>
						
						<p:panel header="Reject Mentor" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="mentorResetGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber value="#{dataFixUI.wspId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="Mentor ID" />
								</h:panelGroup>
								<p:commandButton value="Reject Mentor" update="mentorResetGrid" action="#{dataFixUI.fixSitesSme}" />
							</p:panelGrid>
						</p:panel>

						<p:panel header="Wsp force back to Merseta Document Upload Task" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="taskDocGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">
								<p:commandButton value="View WSP that will be effected by tasks back to merseta" update="taskDocGrid" action="#{dataFixUI.viewDocumentUploadTaskToMerSETA}" />

								<br />
								<br />

								<div align="right">
									<h:commandLink id="eExcelDocTask">
										<i class="fa fa-file-excel-o fa-2x" aria-hidden="true" style="color: #6A6A6A !important;"></i>
										<p:dataExporter type="xls" target="wspCompDocTask" fileName="WSP_Company" pageOnly="false" />
									</h:commandLink>
									<h:commandLink id="ePdfDocTask" rendered="false">
										<i class="fa fa-file-pdf-o fa-2x" aria-hidden="true" style="color: #6A6A6A !important;"></i>
										<p:dataExporter type="pdf" target="wspCompDocTask" fileName="WSP_Company" pageOnly="false" />
									</h:commandLink>
									<h:commandLink id="eCsvDocTask">
										<i class="fa fa-file-text-o fa-2x" aria-hidden="true" style="color: #6A6A6A !important;"></i>
										<p:dataExporter type="csv" target="wspCompDocTask" fileName="WSP_Company" pageOnly="false" />
									</h:commandLink>
									<h:commandLink id="eXmlDocTask">
										<i class="fa fa-file-code-o fa-2x" aria-hidden="true" style="color: #6A6A6A !important;"></i>
										<p:dataExporter type="xml" target="wspCompDocTask" fileName="WSP_Company" pageOnly="false" />
									</h:commandLink>
									<p:tooltip for="eExcelDocTask" value="#{lang['export.search.results.to.excel']}" position="left" />
									<p:tooltip for="ePdfDocTask" value="#{lang['export.search.results.to.pdf']}" position="left" />
									<p:tooltip for="eCsvDocTask" value="#{lang['export.search.results.as.a.csv']}" position="left" />
									<p:tooltip for="eXmlDocTask" value="#{lang['export.search.results.as.a.xml']}" position="left" />
								</div>

								<p:dataTable var="rvwsp" value="#{dataFixUI.wspEffectedList}" id="wspCompDocTask" rowKey="#{rvwsp.id}" paginator="true" rows="5" paginatorPosition="bottom" emptyMessage="#{lang['no.records.found']}"
									paginatorTemplate="#{lang['page']} {CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15,20,25" reflow="true" lazy="false">
									<p:column headerText="Entity ID">
										<p:outputLabel value="#{rvwsp.company.levyNumber}" />
									</p:column>
									<p:column headerText="Company Name">
										<p:outputLabel value="#{rvwsp.company.companyName}" />
									</p:column>
									<p:column headerText="WSP Status">
										<p:outputLabel value="#{rvwsp.wspStatusEnum.friendlyName}" />
									</p:column>
								</p:dataTable>

							</p:panelGrid>

							<p:panelGrid columns="1" style="width:100%" id="runFIxGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">

								<p:separator />
								<br />
								<br />

								<p:commandButton value="Run Task fix" update="@form" action="#{dataFixUI.sendDocumentUploadTaskToMerSETA}" />

							</p:panelGrid>
						</p:panel>
						<p:panel header="DG Allocation Task Generation After MerSETA final Approve" rendered="false">
							<p:panelGrid columns="1" style="width:100%" id="blankInsGrid" layout="grid" styleClass="ui-panelgrid-blank form-group">

								<h:panelGroup styleClass="md-inputfield">
									<p:inputText id="createDate" value="#{dataFixUI.lNumber}" style="width:95%">
										<p:ajax />
									</p:inputText>
									<p:outputLabel value="Lnumber" for="createDate" />
								</h:panelGroup>

								<h:panelGroup styleClass="md-inputfield">
									<p:commandButton value="add L number to list" update="@form" action="#{dataFixUI.addLnumber}" />
								</h:panelGroup>

								<h:panelGroup>
									<p:repeat var="rv" value="#{dataFixUI.companyLNumbers}">
										<p:outputLabel value="#{rv}" />
										<br />
									</p:repeat>
								</h:panelGroup>

								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber value="#{dataFixUI.createUserId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="Create User Id" />
								</h:panelGroup>

								<h:panelGroup styleClass="md-inputfield">
									<p:inputNumber value="#{dataFixUI.previousTaskId}" style="width:95%">
										<p:ajax />
									</p:inputNumber>
									<p:outputLabel value="Previous Task ID" />
								</h:panelGroup>

								<p:panelGrid columns="2" styleClass="ui-panelgrid-blank">
									<p:commandButton value="#{lang['submit']}" icon="ui-icon-save" update="@form" action="#{dataFixUI.generateMissingTasksByLNumber}" />
								</p:panelGrid>

							</p:panelGrid>
						</p:panel>
					</h:form>
				</div>
			</div>
		</div>
	</ui:define>
	<!-- 
createDate = createDate
note = note

-->
</ui:composition>
